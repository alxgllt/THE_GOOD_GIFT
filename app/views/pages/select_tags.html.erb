<div class="text-center">
  <h1>  Selectionne les univers qui correspondent Ã  <strong> <%= params[:search_name] %> </strong> </h1>
</div>
<div class="wrapper">
  <div class="container">
    <div class="row">
     <%= form_tag products_path, method: :get, id: "select-universe" do %>
     <% @tags_as_objects.each do |tag| %>
     <label class="select-tag-container" for="<%= tag.identifier %>">
      <%= check_box_tag "tags[]", tag.title, false, id: tag.identifier, style: "display: none;" %>
      <div class=" col-xs-6 col-sm-3 select-tag margined" data-tag-title="<%= tag.title %>">
        <div class="card" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url(<%= asset_path(tag.image_file_name) %>);">
          <div class="card-category text-center placed">
            <%= tag.title %>
          </div>
          <div class="checked-sym">
            <i class="fa fa-check" aria-hidden="true"></i>
          </div>
        </div>
        <!-- <div class="text-center">
          <h4><#%= tag.description %> </h4>
        </div> -->
      </div>
    </label>
    <% end %>
    <%= hidden_field_tag "search_name", params[:search_name]%>
    <%= hidden_field_tag "search_gender", params[:search_gender]%>
    <%= hidden_field_tag "search_price", params[:search_price]%>
    <%= hidden_field_tag "search_date", params[:search_date]%>
    <div class="text-center">
      <%= submit_tag :Suivant, class: "btn btn-primary btn-restylised" %>
    </div>
    <% end %>
  </div>
</div>
</div>

<div class="error-messages text-center">

</div>




<% content_for :after_js do %>
<script>
 $("#select-universe").on("submit", function() {
  var paragraph = $('<p>').text("Selectionnez au moins 3 univers")
  if ($(".select-tag-container input[type=checkbox]:checked").length >= 3) {
    return true;
  } else {
    $('.error-messages').html(paragraph);
    return false; // prevent it from being submitted (errors, etc.)
    $('.error-messages').remove();
  }
});
</script>
<% end %>



